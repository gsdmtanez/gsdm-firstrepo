<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Montanez | My Portfolio</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>



<h2>Student List</h2>
<ul id="student-list"></ul>

<h2>Subjects Taken</h2>

<input
  type="text"
  id="searchInput"
  placeholder="Search subject (e.g., Computer Programming, Discrete, Web System)..."
/>

<table id="course-table">
  <thead>
    <tr>
      <th>Year</th>
      <th>Sem</th>
      <th>Code</th>
      <th>Description</th>
      <th>Credit</th>
    </tr>
  </thead>
  <tbody id="course-body"></tbody>
</table>

<script>
  
  const jsonURL = "https://gsdmtanez.github.io/gsdm-firstrepo/students.json";

  fetch(jsonURL)
    .then(response => response.json())
    .then(data => {
      const studentList = document.getElementById("student-list");

      data.students.forEach(student => {
        const li = document.createElement("li");
        li.textContent = `${student.name} - ${student.age} (Course: ${student.course})`;
        studentList.appendChild(li);
      });
    });

  
  const coursesURL = "https://gsdmtanez.github.io/gsdm-firstrepo/courses.json";

  const courseTable = document.getElementById("course-table");
  const courseBody = document.getElementById("course-body");
  const searchInput = document.getElementById("searchInput");

  let allCourses = [];

 
  courseTable.style.display = "none";

  function renderCourses(list) {
    courseBody.innerHTML = "";

    if (list.length === 0) {
      const tr = document.createElement("tr");
      tr.innerHTML = `<td colspan="5">No subjects found.</td>`;
      courseBody.appendChild(tr);
      return;
    }

    list.forEach(course => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${course.year_level}</td>
        <td>${course.sem}</td>
        <td>${course.code}</td>
        <td>${course.description}</td>
        <td>${course.credit}</td>
      `;
      courseBody.appendChild(tr);
    });
  }

  fetch(coursesURL)
    .then(res => res.json())
    .then(data => {
      allCourses = data.courses;

      searchInput.addEventListener("input", () => {
        const keyword = searchInput.value.toLowerCase().trim();

        if (keyword === "") {
          courseTable.style.display = "none";
          return;
        }

        courseTable.style.display = "table";

        const filtered = allCourses.filter(course =>
          course.description.toLowerCase().includes(keyword) ||
          course.code.toLowerCase().includes(keyword)
        );

        renderCourses(filtered);
      });
    });
</script>

</body>
</html>